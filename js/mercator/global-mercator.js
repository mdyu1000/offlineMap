!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.globalMercator=r()}}(function(){return function r(e,t,n){function o(u,a){if(!t[u]){if(!e[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[u]={exports:{}};e[u][0].call(c.exports,function(r){var t=e[u][1][r];return o(t?t:r)},c,c.exports,r,e,t,n)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(r,e,t){"use strict";function n(r){return r=r||256,2*Math.PI*6378137/r}function o(r){var e=r[0],t=r[1],n=r[2];return(1<<n)*((1<<n)+e)+t}function i(r,e,t){var n=u(r,e,t);return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n}function u(r,e,t){var n=e,o=G(r[0]),i=_(r[1]),u=Math.sin(i*D),a=Math.pow(2,n),f=a*(o/360+.5),l=a*(.5-.25*Math.log((1+u)/(1-u))/Math.PI);return P([f,l,n],t)}function a(r){var e=r[0],t=r[1],n=r[2],o=r[3],i=(e-n)/2+n,u=(t-o)/2+o;return i=Number(i.toFixed(6)),u=Number(u.toFixed(6)),[i,u]}function f(r,e){r=N(r,e);var t=r[0],n=r[1],o=t*C/180,i=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);return i=i*C/180,o=Number(o.toFixed(1)),i=Number(i.toFixed(1)),[o,i]}function l(r){var e=r[0],t=r[1],n=e/C*180,o=t/C*180;return o=180/Math.PI*(2*Math.atan(Math.exp(o*Math.PI/180))-Math.PI/2),n=Number(n.toFixed(6)),o=Number(o.toFixed(6)),[n,o]}function c(r,e,t){var n=r[0],o=r[1],i=k(e,t),u=(n+C)/i,a=(o+C)/i;return[u,a,e]}function v(r,e,t){r=N(r,t);var n=f(r),o=c(n,e);return M(o)}function d(r,e,t){if(r=N(r,t),0===e)return[0,0,0];var n=v(r,e);return x(n)}function h(r,e){if(0===e)return[0,0,0];var t=c(r,e);return M(t)}function s(r,e){var t=r[0],n=r[1],o=r[2],i=k(o,e),u=t*i-C,a=n*i-C;return u=Number(u.toFixed(1)),a=Number(a.toFixed(1)),[u,a]}function M(r,e,t){e=e||256;var n=r[0],o=r[1],i=r[2];if(0===i)return[0,0,0];F(i,t);var u=Math.ceil(n/e)-1,a=Math.ceil(o/e)-1;return u<0&&(u=0),a<0&&(a=0),[u,a,i]}function T(r,e,t){P(r,t),e=e||256;var n=r[0],o=r[1],i=r[2],u=s([n*e,o*e,i]),a=s([(n+1)*e,(o+1)*e,i]);return[u[0],u[1],a[0],a[1]]}function w(r,e){P(r,e);var t=r[0],n=r[1],o=r[2];if(0===o)return[-180,-85.051129,180,85.051129];var i=T([t,n,o]),u=i[0],a=i[1],f=i[2],c=i[3],v=l([u,a,o]),d=l([f,c,o]);return[v[0],v[1],d[0],d[1]]}function p(r){var e=b(r);return T(e)}function g(r){var e=b(r);return w(e)}function x(r,e){P(r,e);var t=r[0],n=r[1],o=r[2];if(0===o)return[0,0,0];var i=t,u=Math.pow(2,o)-1-n;return[i,u,o]}function b(r){var e=r[0],t=r[1],n=r[2],o=e,i=Math.pow(2,n)-t-1;return[o,i,n]}function m(r){var e=b(r);return y(e)}function y(r,e){P(r,e);var t=r[0],n=r[1],o=r[2];if(0===o)return"";var i="";return n=Math.pow(2,o)-1-n,L(o,0,-1).map(function(r){var e=0,o=1<<r-1;0!==(t&o)&&(e+=1),0!==(n&o)&&(e+=2),i=i.concat(e)}),i}function q(r){var e=E(r);return b(e)}function E(r){var e=0,t=0,n=r.length;return L(n,0,-1).map(function(o){var i=1<<o-1;switch(parseInt(r[n-o],0)){case 0:break;case 1:e+=i;break;case 2:t+=i;break;case 3:e+=i,t+=i;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[e,t,n]}function I(r){var e=f([r[0],r[1]]),t=f([r[2],r[3]]);return[e[0],e[1],t[0],t[1]]}function P(r,e){var t=r[0],n=r[1],o=r[2];if(e===!1)return r;if(void 0===o||null===o)throw new Error("<zoom> is required");if(void 0===t||null===t)throw new Error("<x> is required");if(void 0===n||null===n)throw new Error("<y> is required");return o=F(o),r=B(r)}function B(r){var e=r[0],t=r[1],n=r[2],o=Math.pow(2,n);return e%=o,e<0&&(e+=o),[e,t,n]}function F(r){if(r===!1)return r;if(void 0===r||null===r)throw new Error("<zoom> is required");if(r<0)throw new Error("<zoom> cannot be less than 0");if(r>32)throw new Error("<zoom> cannot be greater than 32");return r}function N(r,e){if(e===!1)return r;var t=G(r[0]),n=_(r[1]);return n>85&&(n=85),n<-85&&(n=-85),[t,n]}function k(r,e){return n(e)/Math.pow(2,r)}function L(r,e,t){null==e&&(e=r||0,r=0),t||(t=e<r?-1:1);for(var n=Math.max(Math.ceil((e-r)/t),0),o=Array(n),i=0;i<n;i++,r+=t)o[i]=r;return o}function z(r){if(!r)throw new Error("array is required");if(r&&r[0]&&4===r.length&&void 0===r[0][0])return r;if(r&&r[0]&&void 0!==r[0][0]){var e=r[0][0],t=r[0][1],n=r[0][2],o=r[0][3];return r.map(function(r){r[0]<e&&(e=r[0]),r[1]<t&&(t=r[1]),r[2]>n&&(n=r[2]),r[3]>o&&(o=r[3])}),[e,t,n,o]}}function O(r){try{return P(r),!0}catch(r){return!1}}function _(r){if(void 0===r||null===r)throw new Error("lat is required");return(r>90||r<-90)&&(r%=180,r>90&&(r=-180+r),r<-90&&(r=180+r),0===r&&(r=0)),r}function G(r){if(void 0===r||null===r)throw new Error("lng is required");return(r>180||r<-180)&&(r%=360,r>180&&(r=-360+r),r<-180&&(r=360+r),0===r&&(r=0)),r}function Q(r){var e=i([r[0],r[1]],32),t=i([r[2],r[3]],32),n=[e[0],e[1],t[0],t[1]],o=j(n);if(0===o)return[0,0,0];var u=n[0]>>>32-o,a=n[1]>>>32-o;return[u,a,o]}function j(r){for(var e=28,t=0;t<e;t++){var n=1<<32-(t+1);if((r[0]&n)!==(r[2]&n)||(r[1]&n)!==(r[3]&n))return t}return e}Object.defineProperty(t,"__esModule",{value:!0});var C=2*Math.PI*6378137/2,D=Math.PI/180;t.initialResolution=n,t.hash=o,t.pointToTile=i,t.pointToTileFraction=u,t.bboxToCenter=a,t.lngLatToMeters=f,t.metersToLngLat=l,t.metersToPixels=c,t.lngLatToTile=v,t.lngLatToGoogle=d,t.metersToTile=h,t.pixelsToMeters=s,t.pixelsToTile=M,t.tileToBBoxMeters=T,t.tileToBBox=w,t.googleToBBoxMeters=p,t.googleToBBox=g,t.tileToGoogle=x,t.googleToTile=b,t.googleToQuadkey=m,t.tileToQuadkey=y,t.quadkeyToTile=q,t.quadkeyToGoogle=E,t.bboxToMeters=I,t.validateTile=P,t.wrapTile=B,t.validateZoom=F,t.validateLngLat=N,t.resolution=k,t.range=L,t.maxBBox=z,t.validTile=O,t.latitude=_,t.longitude=G,t.bboxToTile=Q},{}]},{},[1])(1)});